
<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Tamagotchi Echomori Style üé∏</title>

  <!-- Google Fonts (balises <link> correctes) -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;700&display=swap" rel="stylesheet">

  <!-- Votre feuille de style -->
  <link rel="stylesheet" href="style.css?v=2">

  <!-- Styles sp√©cifiques au mini-jeu (ajout√©s ici pour que √ßa marche direct) -->
  <style>
    /* ===== Mini-jeu: grille & cartes ===== */
    .game-grid {
      display: grid;
      grid-template-columns: repeat(3, minmax(90px, 140px));
      gap: 1rem;
      justify-content: center;
      margin: 1rem 0 1.2rem;
    }
    .card {
      appearance: none;
      border: none;
      background: transparent;
      cursor: pointer;
      padding: 0;
      perspective: 800px; /* effet 3D pour la rotation */
    }
    .card:disabled { cursor: not-allowed; opacity: 0.7; }

    .card-inner {
      width: 100%;
      aspect-ratio: 3 / 4;
      border-radius: 12px;
      border: 1px solid #2a2e44;
      background: #15172a;
      position: relative;
      transform-style: preserve-3d;
      transition: transform 420ms ease;
    }
    .card.flipped .card-inner { transform: rotateY(180deg); }

    .card-face {
      position: absolute;
      inset: 0;
      border-radius: 12px;
      display: grid;
      place-items: center;
      font-weight: 700;
      backface-visibility: hidden;
    }
    .card-face.back {
      color: var(--muted);
      font-size: 1.4rem;
    }
    .card-face.front {
      transform: rotateY(180deg);
      position: relative; /* pour les effets ::before/::after */
      overflow: hidden;
      background: #0f1122; /* fond si image plus petite */
    }

    /* Image de face */
    .card-face.front .card-img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      border-radius: 12px;
      display: block;
    }

    /* Perdu : un l√©ger feedback visuel */
    .card.revealed.lose .card-face.front .card-img {
      filter: grayscale(100%) opacity(0.9);
    }

    /* ‚úÖ Gagn√© (shiny) : effet BRILLANT (halo + balayage) */
    .card.revealed.win .card-face.front .card-img {
      filter: drop-shadow(0 0 12px rgba(255, 213, 79, 0.65));
    }
    .card.revealed.win .card-face.front::before {
      /* halo dor√© autour */
      content: "";
      position: absolute;
      inset: -4px;
      border-radius: 14px;
      box-shadow: 0 0 0 6px var(--ring), 0 0 22px rgba(255, 213, 79, 0.75);
    }
    .card.revealed.win .card-face.front::after {
      /* balayage "shimmer" */
      content: "";
      position: absolute;
      top: -20%;
      left: -120%;
      width: 60%;
      height: 140%;
      transform: rotate(20deg);
      background: linear-gradient(
        to right,
        rgba(255,255,255,0) 0%,
        rgba(255,255,255,0.65) 50%,
        rgba(255,255,255,0) 100%
      );
      mix-blend-mode: screen;
      animation: shimmer-sweep 1.6s ease-in-out infinite;
    }
    @keyframes shimmer-sweep {
      0%   { left: -120%; }
      50%  { left: 0%; }
      100% { left: 120%; }
    }

    .game-actions {
      display: grid;
      justify-items: center;
      gap: 0.8rem;
    }
    .game-status { min-height: 1.2rem; color: var(--text); }

    /* Responsive: un peu plus d'air sur mobile */
    @media (max-width: 640px) {
      .game-grid {
        grid-template-columns: repeat(3, minmax(80px, 110px));
        gap: 0.8rem;
      }
    }
  </style>
</head>
<body>
  <header class="site-header">
    <div class="brand">
      <span class="logo" aria-hidden="true">üé∏</span>
      <span class="title">„Çø„Éû„Ç¥„ÉÉ„ÉÅ „Ç®„Ç≥„É¢„É™„Çπ„Çø„Ç§„É´</span>
    </div>

    <nav class="tabs" aria-label="Navigation principale">
      <button class="tab active" data-target="home">Accueil</button>
      <button class="tab" data-target="how">Comment √ßa marche ?</button>
            <!-- üÜï Onglet Mini-jeu -->
      <button class="tab" data-target="minigame">Mini‚Äëjeu</button>
      <button class="tab" data-target="contact">Contact</button>
    </nav>
  </header>

  <main>
    <!-- Accueil -->
    <section id="home" class="panel visible" tabindex="0">
      <h1> ÊúÄ„ÇÇ„É¶„Éã„Éº„ÇØ„Å™„Åü„Åæ„Åî„Å£„Å° </h1>
      <p> YIYIYIYIYIYIIIüî•! Voici ton nouveau Tamagotchi dans une √©dition super limit√©e : <strong> Echomori Style üêü </strong> ‚Äî LE Tamagotchi que tout le monde s'arrache (disponible en un seul exemplaire !).</p>
       <figure class="hero">
      <div class="hero-media">
          <video controls preload="metadata" playsinline poster="assets/images/cover2.png">
          <source src="assets/images/PresentationPourSite.mp4" type="video/mp4">
          Ton navigateur ne supporte pas la vid√©o.
        </video>
      </div>
      <figcaption>Ta ROCKSTAR √† port√©e de main</figcaption>
    </figure>
      <div class="cta-row">
        <a href="#how" class="btn primary" data-target="how">Comment √ßa marche ?</a>
        <a href="#contact" class="btn" data-target="contact">Une r√©clamation ? c'est ici</a>
      </div>
    </section>

    <!-- Comment √ßa marche -->
    <section id="how" class="panel" tabindex="0">
      <h2>Comment √ßa marche ?</h2>

      <ol class="steps">
        <li>Fais-le grandir, entra√Æne-le et <strong>SLAY GIRLLLL</strong> üíÖ !</li>
        <li>Plus tu t‚Äôen occupes, plus IL DEVIENT UNE ROCKSTAR D'EXCEPTION üî•.</li>
        <li>Prends en soin, SINON IL MEURT ‚ò†Ô∏è.</li>
        <li>Plusieurs fonctionnalit√©s sont cach√©es, √† toi de les d√©couvrir üîé!</li>
        <li>Ce Tamagotchi fonctionne sur batterie, pense √† le recharger <strong>une fois</strong> par jour !</li>
      </ol>

      <div class="lore" style="text-align: center;">
        <p class="hidden-lore" style="opacity: 0.35; font-style: italic;">
          Ce Tamagotchi n‚Äôappara√Æt qu‚Äôune fois par g√©n√©ration.
        </p>
        <p style="opacity: 0.35; font-style: italic;">
          Tu as √©t√© choisie. Bonne chance. üêü‚ú®
        </p>
      </div>
    </section>

    <!-- üïπÔ∏è Mini‚Äëjeu -->
    <section id="minigame" class="panel" tabindex="0" aria-labelledby="minigame-title">
      <h2 id="minigame-title">Mini‚Äëjeu : Une seule carte gagnante</h2>
      <p style="color: var(--muted); margin-top: -0.5rem;">
        Clique sur une des trois cartes. Si tu tombes sur la carte shiny, tu gagnes ce qu'elle montre !
      </p>

      <!-- Grille de cartes -->
      <div class="game-grid" role="group" aria-label="Cartes du mini-jeu">
        <button class="card" data-index="0" aria-label="Carte 1">
          <div class="card-inner">
            <div class="card-face back" aria-hidden="true">?</div>
            <div class="card-face front">
              <img class="card-img" src="" alt="Carte" />
            </div>
          </div>
        </button>

        <button class="card" data-index="1" aria-label="Carte 2">
          <div class="card-inner">
            <div class="card-face back" aria-hidden="true">?</div>
            <div class="card-face front">
              <img class="card-img" src="" alt="Carte" />
            </div>
          </div>
        </button>

        <button class="card" data-index="2" aria-label="Carte 3">
          <div class="card-inner">
            <div class="card-face back" aria-hidden="true">?</div>
            <div class="card-face front">
              <img class="card-img" src="" alt="Carte" />
            </div>
          </div>
        </button>
      </div>

      <!-- Zone d‚Äô√©tat + actions -->
      <div class="game-actions">
        <p class="game-status" aria-live="polite"></p>
        <button class="btn primary" id="replay-btn" type="button">Rejouer</button>
      </div>
    </section>

    <!-- Contact -->
    <section id="contact" class="panel" tabindex="0">
      <h2>Contact</h2>
      <p>Tu n'es pas satisfaite de ton produit ? D√©pose une r√©clamation ici :</p>
      <img src="assets/images/chat_triste.jpg" 
           alt="Chat triste" 
           style="
             width: 300px; 
             height: auto; 
             display: block; 
             margin: 0 auto 20px auto; /* espace sous l'image */
             border-radius: 15px; 
             border: 2px solid #ccc;
           " />
      <div class="cta-row">
        <a class="btn primary" href="mailto:etournoux@hotmail.fr">C'EST PAS SYMPA</a>
        <a class="btn" href="#home" data-target="home">Revenir √† l‚Äôaccueil</a>
      </div>
    </section>
  </main>

  <footer class="site-footer">
    <small>¬© Tamagotchi Echomori Style üêü.</small>
    <small class="edition">Edition unique et limit√©e</small>
  </footer>

  <!-- Script du mini-jeu (utilise assets/images/{1..10,shiny}.png) -->
  <script>
    (function () {
      const IMG_PATH = 'assets/images';  // üìÇ change si besoin (ex: 'assets/cards')
      const IMG_EXT  = 'jpg';            // üñºÔ∏è change si besoin (png/jpg/webp)

      const panel      = document.getElementById('minigame');
      const grid       = panel?.querySelector('.game-grid');
      const statusEl   = panel?.querySelector('.game-status');
      const replayBtn  = document.getElementById('replay-btn');
      if (!panel || !grid || !statusEl || !replayBtn) return;

      let winningIndex = 0;
      let locked = false;

      function pickTwoDistinctNormalImages() {
        const pool = Array.from({ length: 10 }, (_, i) => `${IMG_PATH}/${i + 1}.${IMG_EXT}`);
        // M√©lange (Fisher‚ÄìYates)
        for (let i = pool.length - 1; i > 0; i--) {
          const j = Math.floor(Math.random() * (i + 1));
          [pool[i], pool[j]] = [pool[j], pool[i]];
        }
        return pool.slice(0, 2);
      }

function initGame() {
  winningIndex = Math.floor(Math.random() * 3);
  locked = false;
  statusEl.textContent = "le choix est difficile ?";

  const cards = grid.querySelectorAll('.card');

  // 1Ô∏è‚É£ Cache imm√©diatement toutes les cartes
  cards.forEach(card => {
    card.classList.remove('flipped', 'revealed', 'win', 'lose');
    card.disabled = true;
  });

  // 2Ô∏è‚É£ Attendre la fin de l‚Äôanimation de flip
  setTimeout(() => {
    const normals = pickTwoDistinctNormalImages();

    cards.forEach((card, idx) => {
      const img = card.querySelector('.card-img');
      const src = (idx === winningIndex)
        ? `${IMG_PATH}/shiny.${IMG_EXT}`
        : normals.pop();

      img.src = src;
      img.alt = (idx === winningIndex) ? "Carte shiny" : "Carte";

      card.disabled = false;
      card.dataset.index = String(idx);
    });
  }, 450); // l√©g√®rement > 420ms (dur√©e CSS)
}

      function reveal(clickedCard) {
        if (locked) return;
        locked = true;

        const clickedIndex = Number(clickedCard.dataset.index);
        const cards = Array.from(grid.querySelectorAll('.card'));

        // Retourne toutes les cartes (r√©v√®le la face)
        cards.forEach(c => {
          c.classList.add('flipped', 'revealed');
          c.disabled = true;
        });

        // Active l‚Äôeffet brillant sur la shiny
        const shinyCard = cards[winningIndex];
        shinyCard.classList.add('win');

        if (clickedIndex !== winningIndex) {
          clickedCard.classList.add('lose');
          statusEl.textContent = "ü¶∂ PERDU, Coup dur pour la joueuse belge.";
        } else {
          statusEl.textContent = "ü´¶ SMOOCH SMOOCH TU AS GAGN√â !";
        }
      }

      // Clic sur les cartes
      grid.addEventListener('click', (e) => {
        const card = e.target.closest('.card');
        if (!card) return;
        reveal(card);
      });

      // Rejouer
      replayBtn.addEventListener('click', initGame);

      // D√©marrage : initialise quand on ouvre l‚Äôonglet Mini‚Äëjeu
      const observer = new MutationObserver(() => {
        if (panel.classList.contains('visible')) initGame();
      });
      observer.observe(panel, { attributes: true, attributeFilter: ['class'] });

      // Cas o√π le panel est d√©j√† visible au chargement
      if (panel.classList.contains('visible')) initGame();
    })();
  </script>

  <!-- Ton script existant -->
  <script src="script.js"></script>
</body>
</html>
